import{a as u,r as g,l as f,g as m,u as x,s as b,j as t}from"./main-rs2D7N6z.js";import{u as l,A as p}from"./Auth-dbvjWqwn.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new e.Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="ab2127f6-1f0b-49b7-8f9f-462181d5343b",e._sentryDebugIdIdentifier="sentry-dbid-ab2127f6-1f0b-49b7-8f9f-462181d5343b")}catch{}const w="904679485445-e0vjjl0o7coenq000oegq4td3coi07hc.apps.googleusercontent.com",y=(e,a,i)=>({client_id:w,callback:async o=>{console.log("Google Sign-In response:",o),e.mutate({data:{access_token:o.credential}})},auto_select:!1,cancel_on_tap_outside:!0}),h=(e,a,i)=>{var o,r;if(typeof window<"u"&&((r=(o=window.google)==null?void 0:o.accounts)!=null&&r.id)){const d=y(e);window.google.accounts.id.initialize(d)}},j=e=>{var a,i;typeof window<"u"&&((i=(a=window.google)==null?void 0:a.accounts)!=null&&i.id)&&window.google.accounts.id.renderButton(document.getElementById(e),{theme:"outline",size:"large",type:"standard",text:"signin_with",shape:"rectangular",logo_alignment:"left"})};function _(){const e=u(),[a,i]=g.useState(null),o=l({fn:f,onSuccess:async s=>{var n;if(!((n=s.data)!=null&&n.error)){await e.invalidate(),e.navigate({to:"/"});return}}}),r=l({fn:m,onSuccess:async s=>{var n;debugger;if((n=s.data)!=null&&n.error)i(s.data.message||"Authentication failed");else{await e.invalidate(),e.navigate({to:"/"});return}}}),d=l({fn:x(b)});return g.useEffect(()=>{const s=()=>{var n,c;typeof window<"u"&&((c=(n=window.google)==null?void 0:n.accounts)!=null&&c.id)?(h(r),j("google-signin-button")):setTimeout(s,100)};s()},[r]),t.jsxs("div",{className:"space-y-6",children:[t.jsx(p,{actionText:"Login",status:o.status,onSubmit:s=>{const n=new FormData(s.target);o.mutate({data:{email:n.get("email"),password:n.get("password")}})},afterSubmit:o.data?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-red-400",children:o.data.message}),o.data.error&&o.data.message==="Invalid login credentials"?t.jsx("div",{children:t.jsx("button",{className:"text-blue-500",onClick:s=>{const n=new FormData(s.target.form);d.mutate({data:{email:n.get("email"),password:n.get("password")}})},type:"button",children:"Sign up instead?"})}):null]}):null}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-1 border-t border-gray-300"}),t.jsx("span",{className:"px-3 text-gray-500 text-sm",children:"or"}),t.jsx("div",{className:"flex-1 border-t border-gray-300"})]}),t.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[t.jsx("div",{id:"google-signin-button"}),a&&t.jsx("div",{className:"text-red-400 text-sm",children:a}),r.status==="pending"&&t.jsx("div",{className:"text-blue-400 text-sm",children:"Signing in..."})]})]})}export{_ as L};
//# sourceMappingURL=Login-QpR84cK_.js.map
